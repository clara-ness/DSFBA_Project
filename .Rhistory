summarize(prop_women_diabetes = mean(prop_women_diabetes))
GDP_diabetes_cal <-full_join(GDP,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal ,Caloric_consumption, by="country_code")
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_women_diabetes)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption, type="h")
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$cal_prot_animal)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$cal_prot_plant)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$cal_carbs)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$cal_fat)
ggplot(data = GDP_diabetes_cal, mapping = aes(x = "country_name", y = "total_consumption")) +
geom_boxplot()
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
GDP$avg_gdp <- GDP$avg_gdp*1000000000
GDP$avg_gdp <- scale(GDP$avg_gdp)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_women_diabetes)
GDP_diabetes_cal <-full_join(GDP,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal ,Caloric_consumption, by="country_code")
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_women_diabetes)
daily_caloric <- read_csv("data/daily-caloric.csv")
daily_caloric <- subset(daily_caloric, Year >= 2000)
EU <- c("AUT", "BEL", "BGR", "HRV", "CYP", "CZE", "DNK", "EST", "FIN", "FRA", "DEU", "GRC", "HUN", "IRL", "ITA", "LVA", "LTU", "LUX", "MLT", "NLD", "POL", "PRT", "ROU", "SVK", "SVN", "ESP", "SWE", "GBR", "CHE")
daily_caloric<-daily_caloric[daily_caloric$Code %in% EU,] # Subset of table by looking if in each row, Entity is in the EU vector
setDT(daily_caloric)[ , Calories_from_animal_protein := mean(`Calories from animal protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_plant_protein := mean(`Calories from plant protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_carbohydrates := mean(`Calories from carbohydrates (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_fat := mean(`Calories from fat (FAO (2017))`), by = "Entity"]
#FAO = Food and Agriculture Organisation
Caloric_consumption <- data.table(daily_caloric$Entity,daily_caloric$Code,daily_caloric$Calories_from_animal_protein, daily_caloric$Calories_from_plant_protein,daily_caloric$Calories_from_carbohydrates,daily_caloric$Calories_from_fat)
Caloric_consumption <-Caloric_consumption[!duplicated(Caloric_consumption)]
Caloric_consumption <- Caloric_consumption[,-1] #drop country name
colnames(Caloric_consumption) <- c("country_code", "cal_prot_animal", "cal_prot_plant", "cal_carbs","cal_fat")
Caloric_consumption <-Caloric_consumption %>%
group_by(country_code) %>%
mutate(
total_consumption = sum(c(cal_prot_animal,cal_prot_plant,cal_carbs,cal_fat)))
GDP <- read_excel("data/GDP(1960-2020).xls")
colnames(GDP) <- GDP[3,]
GDP <- GDP[-c(1:3),-c(3:44,59:65)] #to drop not useful lines and years, also maybe use the filter and select functions
GDP <- GDP[GDP$"Country Code" %in% EU,]
GDP <- GDP %>% pivot_longer(c('2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013'),names_to = "Year",values_to = "Gross Domestic Product")
colnames(GDP) <- c("country_name","country_code","year","avg_gdp")
GDP$avg_gdp <- as.numeric(GDP$avg_gdp)
GDP <- GDP %>%
group_by(country_name, country_code) %>%
summarize(avg_gdp = mean(avg_gdp))
#Diabetes table tidying
Diabetes <- read_csv("data/Diabetes.csv")
Diabetes2 <- subset(Diabetes, Year >= 2000 , Year <=2013)
Diabetes_EU<-Diabetes2[Diabetes2$`ISO` %in% EU,]
Diabetes_EU <- Diabetes_EU[-c(1,6,7)] #drop interval and country name
Diabetes_EU_men <-subset(Diabetes_EU, Sex=="Men")
Diabetes_EU_women <-subset(Diabetes_EU, Sex=="Women")
colnames(Diabetes_EU_men)<-c("country_code","sex","year","prop_men_diabetes")
colnames(Diabetes_EU_women)<-c("country_code","sex","year","prop_women_diabetes")
Diabetes_EU_men$prop_men_diabetes <- as.numeric(Diabetes_EU_men$prop_men_diabetes)
#Mean of 2000-2013
Diabetes_EU_men <- Diabetes_EU_men %>%
group_by(country_code) %>%
summarize(prop_men_diabetes = mean(prop_men_diabetes))
Diabetes_EU_women <- Diabetes_EU_women %>%
group_by(country_code) %>%
summarize(prop_women_diabetes = mean(prop_women_diabetes))
#Joining tables GDP, Diabetes and Caloric consumption
GDP_diabetes_cal <-full_join(GDP,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal ,Caloric_consumption, by="country_code")
scale(GDP_diabetes_cal)
scale(GDP_diabetes_cal[,-c(1,2)])
GDP_cal_diabetes[,3:8] <- scale(GDP_diabetes_cal[,-c(1,2)])
GDP_diabetes_cal[,3:8] <- scale(GDP_diabetes_cal[,-c(1,2)])
GDP_diabetes_cal[,3:10] <- scale(GDP_diabetes_cal[,-c(1,2)])
View(GDP_diabetes_cal)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_women_diabetes)
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = country_code, y = avg_gdp))
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_women_diabetes)
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against Diabetes
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
##the last 2 plots not the same distributions!! so Question 1 not so trivial after all
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
#ranking GDP and total consumption
GDP_diabetes_cal$rank_GDP <- rank(GDP_diabetes_cal$avg_gdp)
GDP_diabetes_cal$rank_Consumption <- rank(GDP_diabetes_cal$total_consumption)
#Rank btw them
GDP_diabetes_cal <-within(GDP_diabetes_cal, rank3 <- rank(order(rank_GDP, rank_Consumption), ties.method='first'))
order_by(rank3)
plot(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$prop_women_diabetes)
library(readr)
library(dplyr)
library(readxl)
library(data.table)
library(tidyverse)
daily_caloric <- read_csv("data/daily-caloric.csv")
daily_caloric <- subset(daily_caloric, Year >= 2000)
EU <- c("AUT", "BEL", "BGR", "HRV", "CYP", "CZE", "DNK", "EST", "FIN", "FRA", "DEU", "GRC", "HUN", "IRL", "ITA", "LVA", "LTU", "LUX", "MLT", "NLD", "POL", "PRT", "ROU", "SVK", "SVN", "ESP", "SWE", "GBR", "CHE")
daily_caloric<-daily_caloric[daily_caloric$Code %in% EU,] # Subset of table by looking if in each row, Entity is in the EU vector
setDT(daily_caloric)[ , Calories_from_animal_protein := mean(`Calories from animal protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_plant_protein := mean(`Calories from plant protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_carbohydrates := mean(`Calories from carbohydrates (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_fat := mean(`Calories from fat (FAO (2017))`), by = "Entity"]
#FAO = Food and Agriculture Organisation
Caloric_consumption <- data.table(daily_caloric$Entity,daily_caloric$Code,daily_caloric$Calories_from_animal_protein, daily_caloric$Calories_from_plant_protein,daily_caloric$Calories_from_carbohydrates,daily_caloric$Calories_from_fat)
Caloric_consumption <-Caloric_consumption[!duplicated(Caloric_consumption)]
Caloric_consumption <- Caloric_consumption[,-1] #drop country name
colnames(Caloric_consumption) <- c("country_code", "cal_prot_animal", "cal_prot_plant", "cal_carbs","cal_fat")
Caloric_consumption <-Caloric_consumption %>%
group_by(country_code) %>%
mutate(
total_consumption = sum(c(cal_prot_animal,cal_prot_plant,cal_carbs,cal_fat)))
GDP <- read_excel("data/GDP(1960-2020).xls")
colnames(GDP) <- GDP[3,]
GDP <- GDP[-c(1:3),-c(3:44,59:65)] #to drop not useful lines and years, also maybe use the filter and select functions
GDP <- GDP[GDP$"Country Code" %in% EU,]
GDP <- GDP %>% pivot_longer(c('2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013'),names_to = "Year",values_to = "Gross Domestic Product")
colnames(GDP) <- c("country_name","country_code","year","avg_gdp")
GDP$avg_gdp <- as.numeric(GDP$avg_gdp)
GDP <- GDP %>%
group_by(country_name, country_code) %>%
summarize(avg_gdp = mean(avg_gdp))
View(GDP)
View(Caloric_consumption)
GDP$avg_gdp <- GDP$avg_gdp/1000000000
View(GDP)
Diabetes <- read_csv(here::here("data/Diabetes.csv"))
View(Diabetes)
Diabetes_EU<-Diabetes[Diabetes$`ISO` %in% EU,]
Diabetes_EU
Diabetes_EU <- Diabetes_EU[-c(1,6,7)]
View(Diabetes_EU)
Diabetes_EU_women <-subset(Diabetes_EU, Sex=="Women")
Diabetes_EU_women
colnames(Diabetes_EU_men)<-c("country_code","sex","year","prop_men_diabetes")
Diabetes_EU_men <-subset(Diabetes_EU, Sex=="Men")
Diabetes_EU_men
colnames(Diabetes_EU_men)<-c("country_code","sex","year","prop_men_diabetes")
colnames(Diabetes_EU_women)<-c("country_code","sex","year","prop_women_diabetes")
Diabetes_EU_men <- Diabetes_EU_men %>%
group_by(country_code) %>%
summarize(prop_men_diabetes = mean(prop_men_diabetes))
Diabetes_EU_men
Diabetes_EU_women <- Diabetes_EU_women %>%
group_by(country_code) %>%
summarize(prop_women_diabetes = mean(prop_women_diabetes))
Diabetes_EU_women
GDP_diabetes_cal <-full_join(GDP,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal ,Caloric_consumption, by="country_code")
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$prop_women_diabetes)
arrange(GDP, desc(GDP$avg_gdp))
GDP %>%
arrange(desc(GDP$avg_gdp))
GDP_no_outlier <- arrange(GDP, desc(GDP$avg_gdp))
View(GDP_no_outlier)
GDP_no_outlier <- GDP_no_outlier[-1:5,]
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
View(GDP_no_outlier)
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Caloric_consumption, by="country_code")
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Caloric_consumption, by="country_code")
View(GDP_diabetes_cal2)
plot(GDP_diabetes_cal2$avg_gdp, GDP_diabetes_cal2$prop_men_diabetes)
plot(GDP_diabetes_cal2$avg_gdp, GDP_diabetes_cal2$prop_women_diabetes)
View(GDP_diabetes_cal2)
View(Diabetes_EU_men)
View(Diabetes_EU_women)
View(Diabetes_EU_men)
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_women, by="country_code")
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Caloric_consumption, by="country_code")
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- GDP_diabetes_cal2[-c(25:29),]
View(GDP_diabetes_cal2)
View(GDP_diabetes_cal)
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Caloric_consumption, by="country_code")
View(GDP_diabetes_cal2)
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_women, by="country_code")
View(GDP_diabetes_cal2)
View(GDP_diabetes_cal2)
View(GDP_diabetes_cal)
GDP_diabetes_cal2 <- full_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- full_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
View(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- GDP_diabetes_cal2[-c(25:29),]
View(GDP_diabetes_cal2)
plot(GDP_diabetes_cal2$avg_gdp, GDP_diabetes_cal2$prop_men_diabetes)
plot(GDP_diabetes_cal2$avg_gdp, GDP_diabetes_cal2$prop_women_diabetes)
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = country_code, y = avg_gdp))
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against Diabetes
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
##the last 2 plots not the same distributions!! so Question 1 not so trivial after all
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
#ranking GDP and total consumption
GDP_diabetes_cal$rank_GDP <- rank(GDP_diabetes_cal$avg_gdp)
GDP_diabetes_cal$rank_Consumption <- rank(GDP_diabetes_cal$total_consumption)
#Rank btw them
GDP_diabetes_cal <-within(GDP_diabetes_cal, rank3 <- rank(order(rank_GDP, rank_Consumption), ties.method='first'))
order_by(rank3)
rm(GDP_diabetes_cal2)
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
View(GDP_diabetes_cal2)
GDP_no_outlier <- arrange(GDP, desc(GDP$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
plot(GDP_diabetes_cal2$avg_gdp, GDP_diabetes_cal2$prop_men_diabetes)
plot(GDP_diabetes_cal2$avg_gdp, GDP_diabetes_cal2$prop_women_diabetes)
lines(GDP_diabetes_cal2$avg_gdp, GDP_diabetes_cal2$prop_men_diabetes, col = "red")
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against Diabetes
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
##the last 2 plots not the same distributions!! so Question 1 not so trivial after all
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
#ranking GDP and total consumption
GDP_diabetes_cal$rank_GDP <- rank(GDP_diabetes_cal$avg_gdp)
GDP_diabetes_cal$rank_Consumption <- rank(GDP_diabetes_cal$total_consumption)
#Rank btw them
GDP_diabetes_cal <-within(GDP_diabetes_cal, rank3 <- rank(order(rank_GDP, rank_Consumption), ties.method='first'))
order_by(rank3)
ggplot(data = GDP_diabetes_cal2) + geom_point(mapping = aes(x = GDP_diabetes_cal2$avg_gdp, y = GDP_diabetes_cal2$prop_men_diabetes)) + geom_point(mapping = aes(x = GDP_diabetes_cal2$avg_gdp, y = GDP_diabetes_cal2$prop_women_diabetes))
ggplot(data = GDP_diabetes_cal2) + geom_point(mapping = aes(x = GDP_diabetes_cal2$avg_gdp, y = GDP_diabetes_cal2$prop_men_diabetes, color = "blue")) + geom_point(mapping = aes(x = GDP_diabetes_cal2$avg_gdp, y = GDP_diabetes_cal2$prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2, mapping = aes(x = avg_gdp))
+ geom_point(y = prop_men_diabetes, color = "blue"))
ggplot(data = GDP_diabetes_cal2) + geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) + geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes)) +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes))
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
daily_caloric <- read_csv(here::here("data/daily-caloric.csv"))
daily_caloric <- subset(daily_caloric, Year >= 2000)
EU <- c("AUT", "BEL", "BGR", "HRV", "CYP", "CZE", "DNK", "EST", "FIN", "FRA", "DEU", "GRC", "HUN", "IRL", "ITA", "LVA", "LTU", "LUX", "MLT", "NLD", "POL", "PRT", "ROU", "SVK", "SVN", "ESP", "SWE", "GBR", "CHE")
daily_caloric<-daily_caloric[daily_caloric$Code %in% EU,]
daily_caloric
setDT(daily_caloric)[ , Calories_from_animal_protein := mean(`Calories from animal protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_plant_protein := mean(`Calories from plant protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_carbohydrates := mean(`Calories from carbohydrates (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_fat := mean(`Calories from fat (FAO (2017))`), by = "Entity"]
Caloric_consumption <- data.table(daily_caloric$Entity,daily_caloric$Code,daily_caloric$Calories_from_animal_protein, daily_caloric$Calories_from_plant_protein,daily_caloric$Calories_from_carbohydrates,daily_caloric$Calories_from_fat)
Caloric_consumption <-Caloric_consumption[!duplicated(Caloric_consumption)]
Caloric_consumption <- Caloric_consumption[,-1]
colnames(Caloric_consumption) <- c("country_code", "cal_prot_animal", "cal_prot_plant", "cal_carbs","cal_fat")
Caloric_consumption <-Caloric_consumption %>%
group_by(country_code) %>%
mutate(
total_consumption = sum(c(cal_prot_animal,cal_prot_plant,cal_carbs,cal_fat)))
GDP <- read_excel(here::here("data/GDP(1960-2020).xls"))
GDP
colnames(GDP) <- GDP[3,]
GDP <- GDP[-c(1:3),-c(3:44,59:65)]
GDP <- GDP[GDP$"Country Code" %in% EU,]
GDP <- GDP %>% pivot_longer(c('2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013'),names_to = "Year",values_to = "Gross Domestic Product")
colnames(GDP) <- c("country_name","country_code","year","avg_gdp")
GDP$avg_gdp <- as.numeric(GDP$avg_gdp)/1000000000
GDP_summarized <- GDP %>%
group_by(country_name, country_code) %>%
summarize(avg_gdp = mean(avg_gdp))
GDP_summarized$avg_gdp <- GDP_summarized$avg_gdp/1000000000
Diabetes <- read_csv(here::here("data/Diabetes.csv"))
Diabetes <- subset(Diabetes, Year >= 2000 , Year <=2013)
Diabetes_EU<-Diabetes[Diabetes$`ISO` %in% EU,]
Diabetes_EU
Diabetes_EU <- Diabetes_EU[-c(1,6,7)]
Diabetes_EU_men <-subset(Diabetes_EU, Sex=="Men")
Diabetes_EU_men
Diabetes_EU_women <-subset(Diabetes_EU, Sex=="Women")
Diabetes_EU_women
colnames(Diabetes_EU_men)<-c("country_code","sex","year","prop_men_diabetes")
colnames(Diabetes_EU_women)<-c("country_code","sex","year","prop_women_diabetes")
Diabetes_EU_men <- Diabetes_EU_men %>%
group_by(country_code) %>%
summarize(prop_men_diabetes = mean(prop_men_diabetes))
Diabetes_EU_men
Diabetes_EU_women <- Diabetes_EU_women %>%
group_by(country_code) %>%
summarize(prop_women_diabetes = mean(prop_women_diabetes))
Diabetes_EU_women
GDP_diabetes_cal <-full_join(GDP_summarized,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal ,Caloric_consumption, by="country_code")
View(GDP)
View(GDP_summarized)
View(GDP)
View(GDP_summarized)
daily_caloric <- read_csv(here::here("data/daily-caloric.csv"))
daily_caloric <- subset(daily_caloric, Year >= 2000)
EU <- c("AUT", "BEL", "BGR", "HRV", "CYP", "CZE", "DNK", "EST", "FIN", "FRA", "DEU", "GRC", "HUN", "IRL", "ITA", "LVA", "LTU", "LUX", "MLT", "NLD", "POL", "PRT", "ROU", "SVK", "SVN", "ESP", "SWE", "GBR", "CHE")
daily_caloric<-daily_caloric[daily_caloric$Code %in% EU,]
daily_caloric
setDT(daily_caloric)[ , Calories_from_animal_protein := mean(`Calories from animal protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_plant_protein := mean(`Calories from plant protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_carbohydrates := mean(`Calories from carbohydrates (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_fat := mean(`Calories from fat (FAO (2017))`), by = "Entity"]
Caloric_consumption <- data.table(daily_caloric$Entity,daily_caloric$Code,daily_caloric$Calories_from_animal_protein, daily_caloric$Calories_from_plant_protein,daily_caloric$Calories_from_carbohydrates,daily_caloric$Calories_from_fat)
Caloric_consumption <-Caloric_consumption[!duplicated(Caloric_consumption)]
Caloric_consumption <- Caloric_consumption[,-1]
colnames(Caloric_consumption) <- c("country_code", "cal_prot_animal", "cal_prot_plant", "cal_carbs","cal_fat")
Caloric_consumption <-Caloric_consumption %>%
group_by(country_code) %>%
mutate(
total_consumption = sum(c(cal_prot_animal,cal_prot_plant,cal_carbs,cal_fat)))
GDP <- read_excel(here::here("data/GDP(1960-2020).xls"))
GDP
colnames(GDP) <- GDP[3,]
GDP <- GDP[-c(1:3),-c(3:44,59:65)]
GDP <- GDP[GDP$"Country Code" %in% EU,]
GDP <- GDP %>% pivot_longer(c('2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013'),names_to = "Year",values_to = "Gross Domestic Product")
colnames(GDP) <- c("country_name","country_code","year","avg_gdp")
GDP$avg_gdp <- as.numeric(GDP$avg_gdp)/1000000000
GDP_summarized <- GDP %>%
group_by(country_name, country_code) %>%
summarize(avg_gdp = mean(avg_gdp))
Diabetes <- read_csv(here::here("data/Diabetes.csv"))
Diabetes <- subset(Diabetes, Year >= 2000 , Year <=2013)
Diabetes_EU<-Diabetes[Diabetes$`ISO` %in% EU,]
Diabetes_EU
Diabetes_EU <- Diabetes_EU[-c(1,6,7)]
Diabetes_EU_men <-subset(Diabetes_EU, Sex=="Men")
Diabetes_EU_men
Diabetes_EU_women <-subset(Diabetes_EU, Sex=="Women")
Diabetes_EU_women
colnames(Diabetes_EU_men)<-c("country_code","sex","year","prop_men_diabetes")
colnames(Diabetes_EU_women)<-c("country_code","sex","year","prop_women_diabetes")
Diabetes_EU_men <- Diabetes_EU_men %>%
group_by(country_code) %>%
summarize(prop_men_diabetes = mean(prop_men_diabetes))
Diabetes_EU_men
Diabetes_EU_women <- Diabetes_EU_women %>%
group_by(country_code) %>%
summarize(prop_women_diabetes = mean(prop_women_diabetes))
Diabetes_EU_women
GDP_diabetes_cal <-full_join(GDP_summarized,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal ,Caloric_consumption, by="country_code")
View(GDP_diabetes_cal)
View(GDP_summarized)
View(GDP)
View(GDP)
View(GDP)
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 3)
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 4)
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 6)
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 7)
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 4)
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))+
geom_smooth(method = "lm")
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm")+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm")+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
GDP_no_outlier <- arrange(GDP, desc(GDP$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm")+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm")+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
GDP_no_outlier <- arrange(GDP_summarized, desc(GDP_summarized$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
