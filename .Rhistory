ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm")+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))+
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
GDP_no_outlier <- arrange(GDP_summarized, desc(GDP_summarized$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
ggplot(data = GDP_diabetes_cal2) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
```{r child = c('intro.Rmd', 'data.Rmd', 'eda.Rmd', 'analysis.Rmd', 'concl.Rmd')}
`{r child = c('intro.Rmd', 'data.Rmd', 'eda.Rmd', 'analysis.Rmd', 'concl.Rmd')}
```{r child = c('intro.Rmd', 'data.Rmd', 'eda.Rmd', 'analysis.Rmd', 'concl.Rmd')}
source(here::here("scripts/setup.R"))
daily_caloric <- read_csv(here::here("data/daily-caloric.csv"))
daily_caloric <- subset(daily_caloric, Year >= 2000)
EU <- c("AUT", "BEL", "BGR", "HRV", "CYP", "CZE", "DNK", "EST", "FIN", "FRA", "DEU", "GRC", "HUN", "IRL", "ITA", "LVA", "LTU", "LUX", "MLT", "NLD", "POL", "PRT", "ROU", "SVK", "SVN", "ESP", "SWE", "GBR", "CHE")
daily_caloric<-daily_caloric[daily_caloric$Code %in% EU,]
daily_caloric
setDT(daily_caloric)[ , Calories_from_animal_protein := mean(`Calories from animal protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_plant_protein := mean(`Calories from plant protein (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_carbohydrates := mean(`Calories from carbohydrates (FAO (2017))`), by = "Entity"]
setDT(daily_caloric)[ , Calories_from_fat := mean(`Calories from fat (FAO (2017))`), by = "Entity"]
Caloric_consumption <- data.table(daily_caloric$Entity,daily_caloric$Code,daily_caloric$Calories_from_animal_protein, daily_caloric$Calories_from_plant_protein,daily_caloric$Calories_from_carbohydrates,daily_caloric$Calories_from_fat)
Caloric_consumption <-Caloric_consumption[!duplicated(Caloric_consumption)]
Caloric_consumption <- Caloric_consumption[,-1]
colnames(Caloric_consumption) <- c("country_code", "cal_prot_animal", "cal_prot_plant", "cal_carbs","cal_fat")
Caloric_consumption <-Caloric_consumption %>%
group_by(country_code) %>%
mutate(
total_consumption = sum(c(cal_prot_animal,cal_prot_plant,cal_carbs,cal_fat)))
GDP <- read_excel(here::here("data/GDP(1960-2020).xls"))
GDP
colnames(GDP) <- GDP[3,]
GDP <- GDP[-c(1:3),-c(3:44,59:65)]
GDP <- GDP[GDP$"Country Code" %in% EU,]
GDP <- GDP %>% pivot_longer(c('2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013'),names_to = "Year",values_to = "Gross Domestic Product")
colnames(GDP) <- c("country_name","country_code","year","avg_gdp")
GDP$avg_gdp <- as.numeric(GDP$avg_gdp)/1000000000
GDP_summarized <- GDP %>%
group_by(country_name, country_code) %>%
summarize(avg_gdp = mean(avg_gdp))
Diabetes <- read_csv(here::here("data/Diabetes.csv"))
Diabetes <- subset(Diabetes, Year >= 2000 , Year <=2013)
Diabetes_EU<-Diabetes[Diabetes$`ISO` %in% EU,]
Diabetes_EU
Diabetes_EU <- Diabetes_EU[-c(1,6,7)]
Diabetes_EU_men <-subset(Diabetes_EU, Sex=="Men")
Diabetes_EU_men
Diabetes_EU_women <-subset(Diabetes_EU, Sex=="Women")
Diabetes_EU_women
colnames(Diabetes_EU_men)<-c("country_code","sex","year","prop_men_diabetes")
colnames(Diabetes_EU_women)<-c("country_code","sex","year","prop_women_diabetes")
Diabetes_EU_men <- Diabetes_EU_men %>%
group_by(country_code) %>%
summarize(prop_men_diabetes = mean(prop_men_diabetes))
Diabetes_EU_men
Diabetes_EU_women <- Diabetes_EU_women %>%
group_by(country_code) %>%
summarize(prop_women_diabetes = mean(prop_women_diabetes))
Diabetes_EU_women
GDP_diabetes_cal <-full_join(GDP_summarized,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal <-full_join(GDP_diabetes_cal ,Caloric_consumption, by="country_code")
source(here::here("scripts/setup.R"))
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 4)
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
GDP_no_outlier <- arrange(GDP_summarized, desc(GDP_summarized$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against Diabetes
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
##the last 2 plots not the same distributions!! so Question 1 not so trivial after all
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
#ranking GDP and total consumption
GDP_diabetes_cal$rank_GDP <- rank(GDP_diabetes_cal$avg_gdp)
GDP_diabetes_cal$rank_Consumption <- rank(GDP_diabetes_cal$total_consumption)
#Rank btw them
GDP_diabetes_cal <-within(GDP_diabetes_cal, rank3 <- rank(order(rank_GDP, rank_Consumption), ties.method='first'))
order_by(rank3)
detach("package:ggplot2", unload = TRUE)
library(ggplot2)
detach("package:ggplot2", unload = TRUE)
library(ggplot2)
source(here::here("scripts/setup.R"))
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 4)
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
GDP_no_outlier <- arrange(GDP_summarized, desc(GDP_summarized$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against Diabetes
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
##the last 2 plots not the same distributions!! so Question 1 not so trivial after all
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
#ranking GDP and total consumption
GDP_diabetes_cal$rank_GDP <- rank(GDP_diabetes_cal$avg_gdp)
GDP_diabetes_cal$rank_Consumption <- rank(GDP_diabetes_cal$total_consumption)
#Rank btw them
GDP_diabetes_cal <-within(GDP_diabetes_cal, rank3 <- rank(order(rank_GDP, rank_Consumption), ties.method='first'))
order_by(rank3)
source(here::here("scripts/setup.R"))
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 4)
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
GDP_no_outlier <- arrange(GDP_summarized, desc(GDP_summarized$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against Diabetes
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
##the last 2 plots not the same distributions!! so Question 1 not so trivial after all
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
#ranking GDP and total consumption
GDP_diabetes_cal$rank_GDP <- rank(GDP_diabetes_cal$avg_gdp)
GDP_diabetes_cal$rank_Consumption <- rank(GDP_diabetes_cal$total_consumption)
#Rank btw them
#GDP_diabetes_cal <-within(GDP_diabetes_cal, rank3 <- rank(order(rank_GDP, rank_Consumption), ties.method='first'))
#order_by(rank3)
#not the same so ranking maybe link btw regimes and lowest diabetes rates??
#Plotting evolution of the microcarbs in the years for each countries
cal_unique <- unique(daily_caloric, by =c('Entity')) # Sorting table by entity (unique)
for (i in 1:nrow(cal_unique)) { # Loop for each entity
tmp <- cal_unique$Entity[i]     # Getting the entity name i
# Taking subset of data table for the chosen entity i
tmp <- subset(daily_caloric,Entity == tmp, select = c("Year","Calories from animal protein (FAO (2017))",
"Calories from plant protein (FAO (2017))",
"Calories from fat (FAO (2017))",
"Calories from carbohydrates (FAO (2017))"))
# Melting the data by years (i.e. getting each value for the different rows for each years)
tmp <- melt(tmp ,  id.vars = 'Year', variable.name = 'Series')
# Print plot
print(ggplot(tmp, aes(Year,value)) + geom_line(aes(colour = Series),size = 2) +
labs(title = paste("Caloric consumption per year",cal_unique$Entity[i]),
y = "Value", x = "Year"))
}
plot(GDP_diabetes_cal$cal_carbs,GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$total_consumption,GDP_diabetes_cal$prop_women_diabetes)
ggplot(data = GDP_diabetes_cal) +
geom_smooth(mapping = aes(x = total_consumption, y = prop_men_diabetes))
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption)
```{r}
cal_unique <- unique(daily_caloric, by =c('Entity')) # Sorting table by entity (unique)
for (i in 1:nrow(cal_unique)) { # Loop for each entity
tmp <- cal_unique$Entity[i]     # Getting the entity name i
# Taking subset of data table for the chosen entity i
tmp <- subset(daily_caloric,Entity == tmp, select = c("Year","Calories from animal protein (FAO (2017))",
"Calories from plant protein (FAO (2017))",
"Calories from fat (FAO (2017))",
"Calories from carbohydrates (FAO (2017))"))
# Melting the data by years (i.e. getting each value for the different rows for each years)
tmp <- melt(tmp ,  id.vars = 'Year', variable.name = 'Series')
# Print plot
print(ggplot(tmp, aes(Year,value)) + geom_line(aes(colour = Series),size = 2) +
labs(title = paste("Caloric consumption per year",cal_unique$Entity[i]),
y = "Value", x = "Year"))
}
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
View(GDP_diabetes_cal)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.5, nudge_y = 0.5,
check_overlap = T)
GDP_cal_no_outliers<-GDP_diabetes_cal[-c("ITA","FRA","GBR","DEU","ESP"),]
GDP_cal_no_outliers<-GDP_diabetes_cal[-c(15,10,29,26,11),]
View(GDP_cal_no_outliers)
GDP_cal_no_outliers<-GDP_diabetes_cal[-c(15,10,29,26,11),]
ggplot(GDP_diabetes_cal_no_outliers, aes(x=GDP_diabetes_cal_no_outliers$avg_gdp, y=GDP_diabetes_cal_no_outliers$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
GDP_cal_no_outliers<-GDP_diabetes_cal[-c(15,10,29,26,11),]
ggplot(GDP_cal_no_outliers, aes(x=GDP_cal_no_outliers$avg_gdp, y=GDP_cal_no_outliers$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_cal_no_outliers$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
for (i in 1:nrow(Diabetes_unique)) {
tmp <- Diabetes_unique$country[i]
# Taking subset of data table for the chosen country i
tmp2 <- subset(Diabetes_EU,country == tmp, select = c("sex","year","prop_diabetes"))
# Print plot
print(ggplot(data = tmp2, mapping = aes(x = year, y =prop_diabetes, color =sex)) + geom_line()
+ labs(title = paste("Evolution of diabetes prevalence in",tmp)))
}
plot(GDP_diabetes_cal$cal_carbs,GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$total_consumption,GDP_diabetes_cal$prop_women_diabetes)
ggplot(data = GDP_diabetes_cal) +
geom_smooth(mapping = aes(x = total_consumption, y = prop_men_diabetes))
#plotting the evolution of the prevalence of diabetes for each country
Diabetes_EU <- Diabetes_EU[-c(2)]
Diabetes_unique <- unique(Diabetes_EU[c('country')]) # Sorting table by country (unique)
Diabetes_unique <- unique(Diabetes_EU[c('country')]) # Sorting table by country (unique)
Diabetes_EU <- Diabetes_EU[-c(2)]
Diabetes_unique <- unique(Diabetes_EU[c('country')]) # Sorting table by country (unique)
Diabetes_unique <- unique(Diabetes_EU[c('country')]) # Sorting table by country (unique)
for (i in 1:nrow(Diabetes_unique)) {
tmp <- Diabetes_unique$country[i]
# Taking subset of data table for the chosen country i
tmp2 <- subset(Diabetes_EU,country == tmp, select = c("sex","year","prop_diabetes"))
# Print plot
print(ggplot(data = tmp2, mapping = aes(x = year, y =prop_diabetes, color =sex)) + geom_line()
+ labs(title = paste("Evolution of diabetes prevalence in",tmp)))
}
Diabetes_EU <- Diabetes_EU[-c(2)]
Diabetes_unique <- unique(Diabetes_EU[c('country')]) # Sorting table by country (unique)
cal_unique <- unique(daily_caloric, by =c('Entity')) # Sorting table by entity (unique)
for (i in 1:nrow(cal_unique)) { # Loop for each entity
tmp <- cal_unique$Entity[i]     # Getting the entity name i
# Taking subset of data table for the chosen entity i
tmp <- subset(daily_caloric,Entity == tmp, select = c("Year","Calories from animal protein (FAO (2017))",
"Calories from plant protein (FAO (2017))",
"Calories from fat (FAO (2017))",
"Calories from carbohydrates (FAO (2017))"))
# Melting the data by years (i.e. getting each value for the different rows for each years)
tmp <- melt(tmp ,  id.vars = 'Year', variable.name = 'Series')
# Print plot
print(ggplot(tmp, aes(Year,value)) + geom_line(aes(colour = Series),size = 2) +
labs(title = paste("Caloric consumption per year",cal_unique$Entity[i]),
y = "Value", x = "Year"))
}
source(here::here("scripts/setup.R"))
ggplot(data = GDP) +
geom_point(mapping = aes(x = year, y = avg_gdp)) +
facet_wrap(~ country_name, nrow = 4)
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"))+
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
GDP_no_outlier <- arrange(GDP_summarized, desc(GDP_summarized$avg_gdp))
GDP_no_outlier <- GDP_no_outlier[-c(1:5),]
GDP_diabetes_cal2 <- left_join(GDP_no_outlier,Diabetes_EU_men, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Diabetes_EU_women, by="country_code")
GDP_diabetes_cal2 <- left_join(GDP_diabetes_cal2,Caloric_consumption, by="country_code")
#since there are diabetes for men and women i am not sure the coloring on this graph is entirely correct
ggplot(data = GDP_diabetes_cal2) +
geom_point(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue")) +
geom_smooth(mapping = aes(x = avg_gdp, y = prop_men_diabetes, color = "blue"), method = "lm") +
geom_point(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"))
geom_smooth(mapping = aes(x = avg_gdp, y = prop_women_diabetes, color = "red"), method = "lm")
#Plotting evolution of the microcarbs in the years for each countries
cal_unique <- unique(daily_caloric, by =c('Entity')) # Sorting table by entity (unique)
for (i in 1:nrow(cal_unique)) { # Loop for each entity
tmp <- cal_unique$Entity[i]     # Getting the entity name i
# Taking subset of data table for the chosen entity i
tmp <- subset(daily_caloric,Entity == tmp, select = c("Year","Calories from animal protein (FAO (2017))",
"Calories from plant protein (FAO (2017))",
"Calories from fat (FAO (2017))",
"Calories from carbohydrates (FAO (2017))"))
# Melting the data by years (i.e. getting each value for the different rows for each years)
tmp <- melt(tmp ,  id.vars = 'Year', variable.name = 'Series')
# Print plot
print(ggplot(tmp, aes(Year,value)) + geom_line(aes(colour = Series),size = 2) +
labs(title = paste("Caloric consumption per year",cal_unique$Entity[i]),
y = "Value", x = "Year"))
}
#Plotting different cal consumption with GDP (trying to find a trend)
plot(GDP_diabetes_cal$avg_gdp, GDP_diabetes_cal$total_consumption,
main="Caloric consumption by country",
ylab="",
type="p",
col="blue")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_fat, col="red", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_carbs, col="green", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_animal, col="orange", type="p")
lines(GDP_diabetes_cal$avg_gdp,GDP_diabetes_cal$cal_prot_plant, col="purple", type="p")
legend("topleft", c("Total Tonsumption","Fat", "Carbs", "Animal Protein", "Plant Protein"),
fill=c("blue","red", "green", "orange", "purple"))
#ggplot total consumption against GDP
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$avg_gdp, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
GDP_cal_no_outliers<-GDP_diabetes_cal[-c(15,10,29,26,11),]
ggplot(GDP_cal_no_outliers, aes(x=GDP_cal_no_outliers$avg_gdp, y=GDP_cal_no_outliers$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_cal_no_outliers$country_code),
nudge_x = 0.25, nudge_y = 0.25,
check_overlap = T)
#ggplot total consumption against Diabetes
ggplot(GDP_diabetes_cal, aes(x=GDP_diabetes_cal$prop_men_diabetes, y=GDP_diabetes_cal$total_consumption)) +
geom_point() + # Show dots
geom_text(
label= (GDP_diabetes_cal$country_code),
nudge_x = 0.5, nudge_y = 0.5,
check_overlap = T)
##the last 2 plots not the same distributions!! so Question 1 not so trivial after all
ggplot(data = GDP_diabetes_cal, mapping = aes(x = country_code, y = total_consumption, color = as.factor("country_name"))) + geom_point()
#ranking GDP and total consumption
GDP_diabetes_cal$rank_GDP <- rank(GDP_diabetes_cal$avg_gdp)
GDP_diabetes_cal$rank_Consumption <- rank(GDP_diabetes_cal$total_consumption)
#Rank btw them
#GDP_diabetes_cal <-within(GDP_diabetes_cal, rank3 <- rank(order(rank_GDP, rank_Consumption), ties.method='first'))
#order_by(rank3)
#not the same so ranking maybe link btw regimes and lowest diabetes rates??
plot(GDP_diabetes_cal$cal_carbs,GDP_diabetes_cal$prop_men_diabetes)
plot(GDP_diabetes_cal$total_consumption,GDP_diabetes_cal$prop_women_diabetes)
ggplot(data = GDP_diabetes_cal) +
geom_smooth(mapping = aes(x = total_consumption, y = prop_men_diabetes))
#plotting the evolution of the prevalence of diabetes for each country
Diabetes_EU <- Diabetes_EU[-c(2)]
